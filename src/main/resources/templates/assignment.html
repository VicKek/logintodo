<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>People and Their Tasks</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--</head>-->
<!--<body class="bg-light">-->
<!--<div class="container mt-5">-->
<!--    <h1 class="mb-4">People and Their Tasks</h1>-->

<!--    <div th:each="person : ${people}" class="mb-4">-->
<!--        <div class="card">-->
<!--            <div class="card-header bg-primary text-white">-->
<!--                <h5 th:text="${person.userName">Person Name</h5>-->
<!--                <p class="mb-0" th:text="${person.email}">email@example.com</p>-->
<!--            </div>-->
<!--            <div class="card-body">-->
<!--                <h6>Tasks:</h6>-->
<!--                <table class="table table-bordered table-sm">-->
<!--                    <thead>-->
<!--                    <tr>-->
<!--                        <th>ID</th>-->
<!--                        <th>Name</th>-->
<!--                        <th>Description</th>-->
<!--                        <th>Status</th>-->
<!--                    </tr>-->
<!--                    </thead>-->
<!--                    <tbody>-->
<!--                    <tr th:each="person : ${people}">-->
<!--                        <td th:text="${person.userName}">Name</td>-->
<!--                        <td th:text="${person.email}">Email</td>-->
<!--                        <td>-->
<!--                            <ul>-->
<!--                                <li th:each="task : ${person.tasks}" th:text="${task.taskName}">Task Name</li>-->
<!--                            </ul>-->
<!--                        </td>-->
<!--                    </tr>-->
<!--                    </tbody>-->
<!--                </table>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!--</body>-->
<!--</html>-->


<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>People and Their Tasks</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h1 class="mb-4">People and Their Tasks</h1>

    <div th:each="person : ${people}" class="mb-4">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 th:text="${person.userName}">Person Name</h5>
                <p class="mb-0" th:text="${person.email}">email@example.com</p>
            </div>
            <div class="card-body">
                <h6>Tasks:</h6>
                <table class="table table-bordered table-sm">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Status</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="task : ${person.tasks}">
                        <td th:text="${task.id}">1</td>
                        <td th:text="${task.taskName}">Task Name</td>
                        <td th:text="${task.description}">Description</td>
                        <td th:text="${task.status ? 'Completed' : 'Not Completed'}">Status</td>
                        <td>
                            <form th:action="@{/tasks/{id}/toggleStatus(id=${task.id})}" method="post" th:object="${task}">
                                <button type="submit" class="btn btn-sm btn-warning">
                                    <span th:text="${task.status ? 'Mark as Incomplete' : 'Mark as Completed'}"></span>
                                </button>
                            </form>
                        </td>
                        <td>
                            <a th:href="@{/tasks/edit/{id}(id=${task.id})}" class="btn btn-sm btn-info">Edit</a>
                        </td>
                        <td>
                            <form th:action="@{/tasks/delete/{id}(id=${task.id})}" method="post">
                                <input type="hidden" name="_method" value="delete"/>
                                <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                            </form>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
</body>
</html>
